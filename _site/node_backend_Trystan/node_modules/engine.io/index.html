<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Engine.IO: the realtime engine | Teacher 2.0</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Engine.IO: the realtime engine" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="August 2023 to June 2024" />
<meta property="og:description" content="August 2023 to June 2024" />
<link rel="canonical" href="http://localhost:4100/Multiplayer/node_backend_Trystan/node_modules/engine.io/" />
<meta property="og:url" content="http://localhost:4100/Multiplayer/node_backend_Trystan/node_modules/engine.io/" />
<meta property="og:site_name" content="Teacher 2.0" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Engine.IO: the realtime engine" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"August 2023 to June 2024","headline":"Engine.IO: the realtime engine","url":"http://localhost:4100/Multiplayer/node_backend_Trystan/node_modules/engine.io/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/Multiplayer/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4100/Multiplayer/feed.xml" title="Teacher 2.0" /><link rel="shortcut icon" type="image/x-icon" href="/Multiplayer/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/Multiplayer/">Teacher 2.0</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Multiplayer/blogs/">Blogs</a><a class="page-link" href="/Multiplayer/search/">Search</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Engine.IO: the realtime engine</h1>
  </header>

  <div class="post-content">
    
<h1 id="engineio-the-realtime-engine">Engine.IO: the realtime engine</h1>

<p><a href="https://github.com/socketio/engine.io/actions"><img src="https://github.com/socketio/engine.io/workflows/CI/badge.svg?branch=master" alt="Build Status" /></a>
<a href="http://badge.fury.io/js/engine.io"><img src="https://badge.fury.io/js/engine.io.svg" alt="NPM version" /></a></p>

<p><code class="language-plaintext highlighter-rouge">Engine.IO</code> is the implementation of transport-based
cross-browser/cross-device bi-directional communication layer for
<a href="http://github.com/socketio/socket.io">Socket.IO</a>.</p>

<h2 id="how-to-use">How to use</h2>

<h3 id="server">Server</h3>

<h4 id="a-listening-on-a-port">(A) Listening on a port</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">engine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection</span><span class="dl">'</span><span class="p">,</span> <span class="nx">socket</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf 8 string</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]));</span> <span class="c1">// binary data</span>
<span class="p">});</span>
</code></pre></div></div>

<h4 id="b-intercepting-requests-for-a-httpserver">(B) Intercepting requests for a http.Server</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">engine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">).</span><span class="nx">createServer</span><span class="p">().</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nx">http</span><span class="p">);</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection</span><span class="dl">'</span><span class="p">,</span> <span class="nx">socket</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">});</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h4 id="c-passing-in-requests">(C) Passing in requests</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">engine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">Server</span><span class="p">();</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection</span><span class="dl">'</span><span class="p">,</span> <span class="nx">socket</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">hi</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// …</span>
<span class="nx">httpServer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">upgrade</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">socket</span><span class="p">,</span> <span class="nx">head</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">handleUpgrade</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">socket</span><span class="p">,</span> <span class="nx">head</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">httpServer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">handleRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="client">Client</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/path/to/engine.io.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">const</span> <span class="nx">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eio</span><span class="p">.</span><span class="nx">Socket</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws://localhost/</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{});</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>For more information on the client refer to the
<a href="http://github.com/socketio/engine.io-client">engine-client</a> repository.</p>

<h2 id="what-features-does-it-have">What features does it have?</h2>

<ul>
  <li><strong>Maximum reliability</strong>. Connections are established even in the presence of:
    <ul>
      <li>proxies and load balancers.</li>
      <li>personal firewall and antivirus software.</li>
      <li>for more information refer to <strong>Goals</strong> and <strong>Architecture</strong> sections</li>
    </ul>
  </li>
  <li><strong>Minimal client size</strong> aided by:
    <ul>
      <li>lazy loading of flash transports.</li>
      <li>lack of redundant transports.</li>
    </ul>
  </li>
  <li><strong>Scalable</strong>
    <ul>
      <li>load balancer friendly</li>
    </ul>
  </li>
  <li><strong>Future proof</strong></li>
  <li><strong>100% Node.JS core style</strong>
    <ul>
      <li>No API sugar (left for higher level projects)</li>
    </ul>
  </li>
</ul>

<h2 id="api">API</h2>

<h3 id="server-1">Server</h3>

<hr />
<p><br /></p>

<h4 id="top-level">Top-level</h4>

<p>These are exposed by <code class="language-plaintext highlighter-rouge">require('engine.io')</code>:</p>

<h5 id="events">Events</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">flush</code>
    <ul>
      <li>Called when a socket buffer is being flushed.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Socket</code>: socket being flushed</li>
          <li><code class="language-plaintext highlighter-rouge">Array</code>: write buffer</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">drain</code>
    <ul>
      <li>Called when a socket buffer is drained</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Socket</code>: socket being flushed</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="properties">Properties</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">protocol</code> <em>(Number)</em>: protocol revision number</li>
  <li><code class="language-plaintext highlighter-rouge">Server</code>: Server class constructor</li>
  <li><code class="language-plaintext highlighter-rouge">Socket</code>: Socket class constructor</li>
  <li><code class="language-plaintext highlighter-rouge">Transport</code> <em>(Function)</em>: transport constructor</li>
  <li><code class="language-plaintext highlighter-rouge">transports</code> <em>(Object)</em>: map of available transports</li>
</ul>

<h5 id="methods">Methods</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">()</code>
    <ul>
      <li>Returns a new <code class="language-plaintext highlighter-rouge">Server</code> instance. If the first argument is an <code class="language-plaintext highlighter-rouge">http.Server</code> then the
new <code class="language-plaintext highlighter-rouge">Server</code> instance will be attached to it. Otherwise, the arguments are passed
directly to the <code class="language-plaintext highlighter-rouge">Server</code> constructor.</li>
      <li><strong>Parameters</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">http.Server</code>: optional, server to attach to.</li>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: optional, options object (see <code class="language-plaintext highlighter-rouge">Server#constructor</code> api docs below)</li>
        </ul>
      </li>
    </ul>

    <p>The following are identical ways to instantiate a server and then attach it.</p>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">httpServer</span><span class="p">;</span> <span class="c1">// previously created with `http.createServer();` from node.js api.</span>

<span class="c1">// create a server first, and then attach</span>
<span class="kd">const</span> <span class="nx">eioServer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">).</span><span class="nx">Server</span><span class="p">();</span>
<span class="nx">eioServer</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nx">httpServer</span><span class="p">);</span>

<span class="c1">// or call the module as a function to get `Server`</span>
<span class="kd">const</span> <span class="nx">eioServer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">)();</span>
<span class="nx">eioServer</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nx">httpServer</span><span class="p">);</span>

<span class="c1">// immediately attach</span>
<span class="kd">const</span> <span class="nx">eioServer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">)(</span><span class="nx">httpServer</span><span class="p">);</span>

<span class="c1">// with custom options</span>
<span class="kd">const</span> <span class="nx">eioServer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">)(</span><span class="nx">httpServer</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">maxHttpBufferSize</span><span class="p">:</span> <span class="mi">1</span><span class="nx">e3</span>
<span class="p">});</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">listen</code>
    <ul>
      <li>Creates an <code class="language-plaintext highlighter-rouge">http.Server</code> which listens on the given port and attaches WS
to it. It returns <code class="language-plaintext highlighter-rouge">501 Not Implemented</code> for regular http requests.</li>
      <li><strong>Parameters</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Number</code>: port to listen on.</li>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: optional, options object</li>
          <li><code class="language-plaintext highlighter-rouge">Function</code>: callback for <code class="language-plaintext highlighter-rouge">listen</code>.</li>
        </ul>
      </li>
      <li><strong>Options</strong>
        <ul>
          <li>All options from <code class="language-plaintext highlighter-rouge">Server.attach</code> method, documented below.</li>
          <li><strong>Additionally</strong> See Server <code class="language-plaintext highlighter-rouge">constructor</code> below for options you can pass for creating the new Server</li>
        </ul>
      </li>
      <li><strong>Returns</strong> <code class="language-plaintext highlighter-rouge">Server</code></li>
    </ul>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">engine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">pingTimeout</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
  <span class="na">pingInterval</span><span class="p">:</span> <span class="mi">10000</span>
<span class="p">});</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection</span><span class="dl">'</span><span class="p">,</span> <span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">attach</code>
    <ul>
      <li>Captures <code class="language-plaintext highlighter-rouge">upgrade</code> requests for a <code class="language-plaintext highlighter-rouge">http.Server</code>. In other words, makes
a regular http.Server WebSocket-compatible.</li>
      <li><strong>Parameters</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">http.Server</code>: server to attach to.</li>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: optional, options object</li>
        </ul>
      </li>
      <li><strong>Options</strong>
        <ul>
          <li>All options from <code class="language-plaintext highlighter-rouge">Server.attach</code> method, documented below.</li>
          <li><strong>Additionally</strong> See Server <code class="language-plaintext highlighter-rouge">constructor</code> below for options you can pass for creating the new Server</li>
        </ul>
      </li>
      <li><strong>Returns</strong> <code class="language-plaintext highlighter-rouge">Server</code> a new Server instance.</li>
    </ul>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">engine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">engine.io</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">httpServer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">).</span><span class="nx">createServer</span><span class="p">().</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nx">httpServer</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">wsEngine</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">eiows</span><span class="dl">'</span><span class="p">).</span><span class="nx">Server</span> <span class="c1">// requires having eiows as dependency</span>
<span class="p">});</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection</span><span class="dl">'</span><span class="p">,</span> <span class="cm">/* ... */</span><span class="p">);</span>
</code></pre></div></div>

<h4 id="server-2">Server</h4>

<p>The main server/manager. <em>Inherits from EventEmitter</em>.</p>

<h5 id="events-1">Events</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">connection</code>
    <ul>
      <li>Fired when a new connection is established.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Socket</code>: a Socket object</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">initial_headers</code>
    <ul>
      <li>Fired on the first request of the connection, before writing the response headers</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">headers</code> (<code class="language-plaintext highlighter-rouge">Object</code>): a hash of headers</li>
          <li><code class="language-plaintext highlighter-rouge">req</code> (<code class="language-plaintext highlighter-rouge">http.IncomingMessage</code>): the request</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">headers</code>
    <ul>
      <li>Fired on the all requests of the connection, before writing the response headers</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">headers</code> (<code class="language-plaintext highlighter-rouge">Object</code>): a hash of headers</li>
          <li><code class="language-plaintext highlighter-rouge">req</code> (<code class="language-plaintext highlighter-rouge">http.IncomingMessage</code>): the request</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">connection_error</code>
    <ul>
      <li>Fired when an error occurs when establishing the connection.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">error</code>: an object with following properties:
            <ul>
              <li><code class="language-plaintext highlighter-rouge">req</code> (<code class="language-plaintext highlighter-rouge">http.IncomingMessage</code>): the request that was dropped</li>
              <li><code class="language-plaintext highlighter-rouge">code</code> (<code class="language-plaintext highlighter-rouge">Number</code>): one of <code class="language-plaintext highlighter-rouge">Server.errors</code></li>
              <li><code class="language-plaintext highlighter-rouge">message</code> (<code class="language-plaintext highlighter-rouge">string</code>): one of <code class="language-plaintext highlighter-rouge">Server.errorMessages</code></li>
              <li><code class="language-plaintext highlighter-rouge">context</code> (<code class="language-plaintext highlighter-rouge">Object</code>): extra info about the error</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Message</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>“Transport unknown”</td>
    </tr>
    <tr>
      <td>1</td>
      <td>“Session ID unknown”</td>
    </tr>
    <tr>
      <td>2</td>
      <td>“Bad handshake method”</td>
    </tr>
    <tr>
      <td>3</td>
      <td>“Bad request”</td>
    </tr>
    <tr>
      <td>4</td>
      <td>“Forbidden”</td>
    </tr>
    <tr>
      <td>5</td>
      <td>“Unsupported protocol version”</td>
    </tr>
  </tbody>
</table>

<h5 id="properties-1">Properties</h5>

<p><strong>Important</strong>: if you plan to use Engine.IO in a scalable way, please
keep in mind the properties below will only reflect the clients connected
to a single process.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">clients</code> <em>(Object)</em>: hash of connected clients by id.</li>
  <li><code class="language-plaintext highlighter-rouge">clientsCount</code> <em>(Number)</em>: number of connected clients.</li>
</ul>

<h5 id="methods-1">Methods</h5>

<ul>
  <li><strong>constructor</strong>
    <ul>
      <li>Initializes the server</li>
      <li><strong>Parameters</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: optional, options object</li>
        </ul>
      </li>
      <li><strong>Options</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">pingTimeout</code> (<code class="language-plaintext highlighter-rouge">Number</code>): how many ms without a pong packet to
consider the connection closed (<code class="language-plaintext highlighter-rouge">20000</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">pingInterval</code> (<code class="language-plaintext highlighter-rouge">Number</code>): how many ms before sending a new ping
packet (<code class="language-plaintext highlighter-rouge">25000</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">upgradeTimeout</code> (<code class="language-plaintext highlighter-rouge">Number</code>): how many ms before an uncompleted transport upgrade is cancelled (<code class="language-plaintext highlighter-rouge">10000</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">maxHttpBufferSize</code> (<code class="language-plaintext highlighter-rouge">Number</code>): how many bytes or characters a message
can be, before closing the session (to avoid DoS). Default
value is <code class="language-plaintext highlighter-rouge">1E6</code>.</li>
          <li><code class="language-plaintext highlighter-rouge">allowRequest</code> (<code class="language-plaintext highlighter-rouge">Function</code>): A function that receives a given handshake
or upgrade request as its first parameter, and can decide whether to
continue or not. The second argument is a function that needs to be
called with the decided information: <code class="language-plaintext highlighter-rouge">fn(err, success)</code>, where
<code class="language-plaintext highlighter-rouge">success</code> is a boolean value where false means that the request is
rejected, and err is an error code.</li>
          <li><code class="language-plaintext highlighter-rouge">transports</code> (<code class="language-plaintext highlighter-rouge">&lt;Array&gt; String</code>): transports to allow connections
to (<code class="language-plaintext highlighter-rouge">['polling', 'websocket']</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">allowUpgrades</code> (<code class="language-plaintext highlighter-rouge">Boolean</code>): whether to allow transport upgrades
(<code class="language-plaintext highlighter-rouge">true</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">perMessageDeflate</code> (<code class="language-plaintext highlighter-rouge">Object|Boolean</code>): parameters of the WebSocket permessage-deflate extension
(see <a href="https://github.com/einaros/ws">ws module</a> api docs). Set to <code class="language-plaintext highlighter-rouge">true</code> to enable. (defaults to <code class="language-plaintext highlighter-rouge">false</code>)
            <ul>
              <li><code class="language-plaintext highlighter-rouge">threshold</code> (<code class="language-plaintext highlighter-rouge">Number</code>): data is compressed only if the byte size is above this value (<code class="language-plaintext highlighter-rouge">1024</code>)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">httpCompression</code> (<code class="language-plaintext highlighter-rouge">Object|Boolean</code>): parameters of the http compression for the polling transports
(see <a href="http://nodejs.org/api/zlib.html#zlib_options">zlib</a> api docs). Set to <code class="language-plaintext highlighter-rouge">false</code> to disable. (<code class="language-plaintext highlighter-rouge">true</code>)
            <ul>
              <li><code class="language-plaintext highlighter-rouge">threshold</code> (<code class="language-plaintext highlighter-rouge">Number</code>): data is compressed only if the byte size is above this value (<code class="language-plaintext highlighter-rouge">1024</code>)</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">cookie</code> (<code class="language-plaintext highlighter-rouge">Object|Boolean</code>): configuration of the cookie that
contains the client sid to send as part of handshake response
headers. This cookie might be used for sticky-session. Defaults to not sending any cookie (<code class="language-plaintext highlighter-rouge">false</code>).
See <a href="https://github.com/jshttp/cookie#options-1">here</a> for all supported options.</li>
          <li><code class="language-plaintext highlighter-rouge">wsEngine</code> (<code class="language-plaintext highlighter-rouge">Function</code>): what WebSocket server implementation to use. Specified module must conform to the <code class="language-plaintext highlighter-rouge">ws</code> interface (see <a href="https://github.com/websockets/ws/blob/master/doc/ws.md">ws module api docs</a>). Default value is <code class="language-plaintext highlighter-rouge">ws</code>. An alternative c++ addon is also available by installing <code class="language-plaintext highlighter-rouge">eiows</code> module.</li>
          <li><code class="language-plaintext highlighter-rouge">cors</code> (<code class="language-plaintext highlighter-rouge">Object</code>): the options that will be forwarded to the cors module. See <a href="https://github.com/expressjs/cors#configuration-options">there</a> for all available options. Defaults to no CORS allowed.</li>
          <li><code class="language-plaintext highlighter-rouge">initialPacket</code> (<code class="language-plaintext highlighter-rouge">Object</code>): an optional packet which will be concatenated to the handshake packet emitted by Engine.IO.</li>
          <li><code class="language-plaintext highlighter-rouge">allowEIO3</code> (<code class="language-plaintext highlighter-rouge">Boolean</code>): whether to support v3 Engine.IO clients (defaults to <code class="language-plaintext highlighter-rouge">false</code>)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">close</code>
    <ul>
      <li>Closes all clients</li>
      <li><strong>Returns</strong> <code class="language-plaintext highlighter-rouge">Server</code> for chaining</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">handleRequest</code>
    <ul>
      <li>Called internally when a <code class="language-plaintext highlighter-rouge">Engine</code> request is intercepted.</li>
      <li><strong>Parameters</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">http.IncomingMessage</code>: a node request object</li>
          <li><code class="language-plaintext highlighter-rouge">http.ServerResponse</code>: a node response object</li>
        </ul>
      </li>
      <li><strong>Returns</strong> <code class="language-plaintext highlighter-rouge">Server</code> for chaining</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">handleUpgrade</code>
    <ul>
      <li>Called internally when a <code class="language-plaintext highlighter-rouge">Engine</code> ws upgrade is intercepted.</li>
      <li><strong>Parameters</strong> (same as <code class="language-plaintext highlighter-rouge">upgrade</code> event)
        <ul>
          <li><code class="language-plaintext highlighter-rouge">http.IncomingMessage</code>: a node request object</li>
          <li><code class="language-plaintext highlighter-rouge">net.Stream</code>: TCP socket for the request</li>
          <li><code class="language-plaintext highlighter-rouge">Buffer</code>: legacy tail bytes</li>
        </ul>
      </li>
      <li><strong>Returns</strong> <code class="language-plaintext highlighter-rouge">Server</code> for chaining</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">attach</code>
    <ul>
      <li>Attach this Server instance to an <code class="language-plaintext highlighter-rouge">http.Server</code></li>
      <li>Captures <code class="language-plaintext highlighter-rouge">upgrade</code> requests for a <code class="language-plaintext highlighter-rouge">http.Server</code>. In other words, makes
a regular http.Server WebSocket-compatible.</li>
      <li><strong>Parameters</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">http.Server</code>: server to attach to.</li>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: optional, options object</li>
        </ul>
      </li>
      <li><strong>Options</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">path</code> (<code class="language-plaintext highlighter-rouge">String</code>): name of the path to capture (<code class="language-plaintext highlighter-rouge">/engine.io</code>).</li>
          <li><code class="language-plaintext highlighter-rouge">destroyUpgrade</code> (<code class="language-plaintext highlighter-rouge">Boolean</code>): destroy unhandled upgrade requests (<code class="language-plaintext highlighter-rouge">true</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">destroyUpgradeTimeout</code> (<code class="language-plaintext highlighter-rouge">Number</code>): milliseconds after which unhandled requests are ended (<code class="language-plaintext highlighter-rouge">1000</code>)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">generateId</code>
    <ul>
      <li>Generate a socket id.</li>
      <li>Overwrite this method to generate your custom socket id.</li>
      <li><strong>Parameters</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">http.IncomingMessage</code>: a node request object</li>
        </ul>
      </li>
      <li><strong>Returns</strong> A socket id for connected client.</li>
    </ul>
  </li>
</ul>

<hr />
<p><br /></p>

<h4 id="socket">Socket</h4>

<p>A representation of a client. <em>Inherits from EventEmitter</em>.</p>

<h5 id="events-2">Events</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">close</code>
    <ul>
      <li>Fired when the client is disconnected.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">String</code>: reason for closing</li>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: description object (optional)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">message</code>
    <ul>
      <li>Fired when the client sends a message.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">String</code> or <code class="language-plaintext highlighter-rouge">Buffer</code>: Unicode string or Buffer with binary contents</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">error</code>
    <ul>
      <li>Fired when an error occurs.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Error</code>: error object</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">upgrading</code>
    <ul>
      <li>Fired when the client starts the upgrade to a better transport like WebSocket.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: the transport</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">upgrade</code>
    <ul>
      <li>Fired when the client completes the upgrade to a better transport like WebSocket.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: the transport</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">flush</code>
    <ul>
      <li>Called when the write buffer is being flushed.</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Array</code>: write buffer</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">drain</code>
    <ul>
      <li>Called when the write buffer is drained</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">packet</code>
    <ul>
      <li>Called when a socket received a packet (<code class="language-plaintext highlighter-rouge">message</code>, <code class="language-plaintext highlighter-rouge">ping</code>)</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">type</code>: packet type</li>
          <li><code class="language-plaintext highlighter-rouge">data</code>: packet data (if type is message)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">packetCreate</code>
    <ul>
      <li>Called before a socket sends a packet (<code class="language-plaintext highlighter-rouge">message</code>, <code class="language-plaintext highlighter-rouge">ping</code>)</li>
      <li><strong>Arguments</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">type</code>: packet type</li>
          <li><code class="language-plaintext highlighter-rouge">data</code>: packet data (if type is message)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">heartbeat</code>
    <ul>
      <li>Called when <code class="language-plaintext highlighter-rouge">ping</code> or <code class="language-plaintext highlighter-rouge">pong</code> packed is received (depends of client version)</li>
    </ul>
  </li>
</ul>

<h5 id="properties-2">Properties</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id</code> <em>(String)</em>: unique identifier</li>
  <li><code class="language-plaintext highlighter-rouge">server</code> <em>(Server)</em>: engine parent reference</li>
  <li><code class="language-plaintext highlighter-rouge">request</code> <em>(http.IncomingMessage)</em>: request that originated the Socket</li>
  <li><code class="language-plaintext highlighter-rouge">upgraded</code> <em>(Boolean)</em>: whether the transport has been upgraded</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">readyState</code> <em>(String)</em>: opening</td>
          <td>open</td>
          <td>closing</td>
          <td>closed</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">transport</code> <em>(Transport)</em>: transport reference</li>
</ul>

<h5 id="methods-2">Methods</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">send</code>:
    <ul>
      <li>Sends a message, performing <code class="language-plaintext highlighter-rouge">message = toString(arguments[0])</code> unless
sending binary data, which is sent as is.</li>
      <li><strong>Parameters</strong>
        <ul>
          <li>
            <table>
              <tbody>
                <tr>
                  <td><code class="language-plaintext highlighter-rouge">String</code></td>
                  <td> <code class="language-plaintext highlighter-rouge">Buffer</code></td>
                  <td><code class="language-plaintext highlighter-rouge">ArrayBuffer</code></td>
                  <td><code class="language-plaintext highlighter-rouge">ArrayBufferView</code>: a string or any object implementing <code class="language-plaintext highlighter-rouge">toString()</code>, with outgoing data, or a Buffer or ArrayBuffer with binary data. Also any ArrayBufferView can be sent as is.</td>
                </tr>
              </tbody>
            </table>
          </li>
          <li><code class="language-plaintext highlighter-rouge">Object</code>: optional, options object</li>
          <li><code class="language-plaintext highlighter-rouge">Function</code>: optional, a callback executed when the message gets flushed out by the transport</li>
        </ul>
      </li>
      <li><strong>Options</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">compress</code> (<code class="language-plaintext highlighter-rouge">Boolean</code>): whether to compress sending data. This option might be ignored and forced to be <code class="language-plaintext highlighter-rouge">true</code> when using polling. (<code class="language-plaintext highlighter-rouge">true</code>)</li>
        </ul>
      </li>
      <li><strong>Returns</strong> <code class="language-plaintext highlighter-rouge">Socket</code> for chaining</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">close</code>
    <ul>
      <li>Disconnects the client</li>
      <li><strong>Returns</strong> <code class="language-plaintext highlighter-rouge">Socket</code> for chaining</li>
    </ul>
  </li>
</ul>

<h3 id="client-1">Client</h3>

<hr />
<p><br /></p>

<p>Exposed in the <code class="language-plaintext highlighter-rouge">eio</code> global namespace (in the browser), or by
<code class="language-plaintext highlighter-rouge">require('engine.io-client')</code> (in Node.JS).</p>

<p>For the client API refer to the
<a href="http://github.com/learnboost/engine.io-client">engine-client</a> repository.</p>

<h2 id="debug--logging">Debug / logging</h2>

<p>Engine.IO is powered by <a href="http://github.com/visionmedia/debug">debug</a>.
In order to see all the debug output, run your app with the environment variable
<code class="language-plaintext highlighter-rouge">DEBUG</code> including the desired scope.</p>

<p>To see the output from all of Engine.IO’s debugging scopes you can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DEBUG=engine* node myapp
</code></pre></div></div>

<h2 id="transports">Transports</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">polling</code>: XHR / JSONP polling transport.</li>
  <li><code class="language-plaintext highlighter-rouge">websocket</code>: WebSocket transport.</li>
</ul>

<h2 id="plugins">Plugins</h2>

<ul>
  <li><a href="https://github.com/EugenDueck/engine.io-conflation">engine.io-conflation</a>: Makes <strong>conflation and aggregation</strong> of messages straightforward.</li>
</ul>

<h2 id="support">Support</h2>

<p>The support channels for <code class="language-plaintext highlighter-rouge">engine.io</code> are the same as <code class="language-plaintext highlighter-rouge">socket.io</code>:</p>
<ul>
  <li>irc.freenode.net <strong>#socket.io</strong></li>
  <li><a href="http://groups.google.com/group/socket_io">Google Groups</a></li>
  <li><a href="http://socket.io">Website</a></li>
</ul>

<h2 id="development">Development</h2>

<p>To contribute patches, run tests or benchmarks, make sure to clone the
repository:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone git://github.com/LearnBoost/engine.io.git
</code></pre></div></div>

<p>Then:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd engine.io
npm install
</code></pre></div></div>

<h2 id="tests">Tests</h2>

<p>Tests run with <code class="language-plaintext highlighter-rouge">npm test</code>. It runs the server tests that are aided by
the usage of <code class="language-plaintext highlighter-rouge">engine.io-client</code>.</p>

<p>Make sure <code class="language-plaintext highlighter-rouge">npm install</code> is run first.</p>

<h2 id="goals">Goals</h2>

<p>The main goal of <code class="language-plaintext highlighter-rouge">Engine</code> is ensuring the most reliable realtime communication.
Unlike the previous Socket.IO core, it always establishes a long-polling
connection first, then tries to upgrade to better transports that are “tested” on
the side.</p>

<p>During the lifetime of the Socket.IO projects, we’ve found countless drawbacks
to relying on <code class="language-plaintext highlighter-rouge">HTML5 WebSocket</code> or <code class="language-plaintext highlighter-rouge">Flash Socket</code> as the first connection
mechanisms.</p>

<p>Both are clearly the <em>right way</em> of establishing a bidirectional communication,
with HTML5 WebSocket being the way of the future. However, to answer most business
needs, alternative traditional HTTP 1.1 mechanisms are just as good as delivering
the same solution.</p>

<p>WebSocket based connections have two fundamental benefits:</p>

<ol>
  <li><strong>Better server performance</strong>
    <ul>
      <li><em>A: Load balancers</em><br />
   Load balancing a long polling connection poses a serious architectural nightmare
   since requests can come from any number of open sockets by the user agent, but
   they all need to be routed to the process and computer that owns the <code class="language-plaintext highlighter-rouge">Engine</code>
   connection. This negatively impacts RAM and CPU usage.</li>
      <li><em>B: Network traffic</em><br />
   WebSocket is designed around the premise that each message frame has to be
   surrounded by the least amount of data. In HTTP 1.1 transports, each message
   frame is surrounded by HTTP headers and chunked encoding frames. If you try to
   send the message <em>“Hello world”</em> with xhr-polling, the message ultimately
   becomes larger than if you were to send it with WebSocket.</li>
      <li><em>C: Lightweight parser</em><br />
   As an effect of <strong>B</strong>, the server has to do a lot more work to parse the network
   data and figure out the message when traditional HTTP requests are used
   (as in long polling). This means that another advantage of WebSocket is
   less server CPU usage.</li>
    </ul>
  </li>
  <li>
    <p><strong>Better user experience</strong></p>

    <p>Due to the reasons stated in point <strong>1</strong>, the most important effect of being able
 to establish a WebSocket connection is raw data transfer speed, which translates
 in <em>some</em> cases in better user experience.</p>

    <p>Applications with heavy realtime interaction (such as games) will benefit greatly,
 whereas applications like realtime chat (Gmail/Facebook), newsfeeds (Facebook) or
 timelines (Twitter) will have negligible user experience improvements.</p>
  </li>
</ol>

<p>Having said this, attempting to establish a WebSocket connection directly so far has
proven problematic:</p>

<ol>
  <li>
    <p><strong>Proxies</strong><br />
 Many corporate proxies block WebSocket traffic.</p>
  </li>
  <li>
    <p><strong>Personal firewall and antivirus software</strong><br />
 As a result of our research, we’ve found that at least 3 personal security
 applications block WebSocket traffic.</p>
  </li>
  <li>
    <p><strong>Cloud application platforms</strong><br />
 Platforms like Heroku or No.de have had trouble keeping up with the fast-paced
 nature of the evolution of the WebSocket protocol. Applications therefore end up
 inevitably using long polling, but the seamless installation experience of
 Socket.IO we strive for (<em>“require() it and it just works”</em>) disappears.</p>
  </li>
</ol>

<p>Some of these problems have solutions. In the case of proxies and personal programs,
however, the solutions many times involve upgrading software. Experience has shown
that relying on client software upgrades to deliver a business solution is
fruitless: the very existence of this project has to do with a fragmented panorama
of user agent distribution, with clients connecting with latest versions of the most
modern user agents (Chrome, Firefox and Safari), but others with versions as low as
IE 5.5.</p>

<p>From the user perspective, an unsuccessful WebSocket connection can translate in
up to at least 10 seconds of waiting for the realtime application to begin
exchanging data. This <strong>perceptively</strong> hurts user experience.</p>

<p>To summarize, <strong>Engine</strong> focuses on reliability and user experience first, marginal
potential UX improvements and increased server performance second. <code class="language-plaintext highlighter-rouge">Engine</code> is the
result of all the lessons learned with WebSocket in the wild.</p>

<h2 id="architecture">Architecture</h2>

<p>The main premise of <code class="language-plaintext highlighter-rouge">Engine</code>, and the core of its existence, is the ability to
swap transports on the fly. A connection starts as xhr-polling, but it can
switch to WebSocket.</p>

<p>The central problem this poses is: how do we switch transports without losing
messages?</p>

<p><code class="language-plaintext highlighter-rouge">Engine</code> only switches from polling to another transport in between polling
cycles. Since the server closes the connection after a certain timeout when
there’s no activity, and the polling transport implementation buffers messages
in between connections, this ensures no message loss and optimal performance.</p>

<p>Another benefit of this design is that we workaround almost all the limitations
of <strong>Flash Socket</strong>, such as slow connection times, increased file size (we can
safely lazy load it without hurting user experience), etc.</p>

<h2 id="faq">FAQ</h2>

<h3 id="can-i-use-engine-without-socketio-">Can I use engine without Socket.IO ?</h3>

<p>Absolutely. Although the recommended framework for building realtime applications
is Socket.IO, since it provides fundamental features for real-world applications
such as multiplexing, reconnection support, etc.</p>

<p><code class="language-plaintext highlighter-rouge">Engine</code> is to Socket.IO what Connect is to Express. An essential piece for building
realtime frameworks, but something you <em>probably</em> won’t be using for building
actual applications.</p>

<h3 id="does-the-server-serve-the-client">Does the server serve the client?</h3>

<p>No. The main reason is that <code class="language-plaintext highlighter-rouge">Engine</code> is meant to be bundled with frameworks.
Socket.IO includes <code class="language-plaintext highlighter-rouge">Engine</code>, therefore serving two clients is not necessary. If
you use Socket.IO, including</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/socket.io/socket.io.js"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>has you covered.</p>

<h3 id="can-i-implement-engine-in-other-languages">Can I implement <code class="language-plaintext highlighter-rouge">Engine</code> in other languages?</h3>

<p>Absolutely. The <a href="https://github.com/socketio/engine.io-protocol">engine.io-protocol</a>
repository contains the most up-to-date description of the specification
at all times.</p>

<h2 id="license">License</h2>

<p>(The MIT License)</p>

<p>Copyright (c) 2014 Guillermo Rauch &lt;guillermo@learnboost.com&gt;</p>

<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
‘Software’), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>

<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED ‘AS IS’, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/Multiplayer/"></data>
  
    <div class="wrapper">
  
      <div class="footer-col-wrapper">
  
        <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://github.com/nighthawkcoders/teacher_portfolio" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/Multiplayer/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://x.com/NighthawkCoding/" target="_blank" title="x">
    <svg class="svg-icon grey">
      <use xlink:href="/Multiplayer/assets/minima-social-icons.svg#x"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.youtube.com/@nighthawkcodingsociety2868" target="_blank" title="youtube">
    <svg class="svg-icon grey">
      <use xlink:href="/Multiplayer/assets/minima-social-icons.svg#youtube"></use>
    </svg>
  </a>
</li>
</ul>
</div>

      </div>
    </div>
  
  </footer></body>

</html>
