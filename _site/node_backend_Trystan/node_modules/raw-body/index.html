<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>raw-body | Teacher 2.0</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="raw-body" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="August 2023 to June 2024" />
<meta property="og:description" content="August 2023 to June 2024" />
<link rel="canonical" href="http://localhost:4100/Multiplayer/node_backend_Trystan/node_modules/raw-body/" />
<meta property="og:url" content="http://localhost:4100/Multiplayer/node_backend_Trystan/node_modules/raw-body/" />
<meta property="og:site_name" content="Teacher 2.0" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="raw-body" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"August 2023 to June 2024","headline":"raw-body","url":"http://localhost:4100/Multiplayer/node_backend_Trystan/node_modules/raw-body/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/Multiplayer/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4100/Multiplayer/feed.xml" title="Teacher 2.0" /><link rel="shortcut icon" type="image/x-icon" href="/Multiplayer/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/Multiplayer/">Teacher 2.0</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Multiplayer/blogs/">Blogs</a><a class="page-link" href="/Multiplayer/search/">Search</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">raw-body</h1>
  </header>

  <div class="post-content">
    <h1 id="raw-body">raw-body</h1>

<p><a href="https://npmjs.org/package/raw-body"><img src="https://img.shields.io/npm/v/raw-body.svg" alt="NPM Version" /></a>
<a href="https://npmjs.org/package/raw-body"><img src="https://img.shields.io/npm/dm/raw-body.svg" alt="NPM Downloads" /></a>
<a href="https://nodejs.org/en/download/"><img src="https://img.shields.io/node/v/raw-body.svg" alt="Node.js Version" /></a>
<a href="https://github.com/jshttp/stream-utils/raw-body?query=workflow%3Aci"><img src="https://img.shields.io/github/workflow/status/stream-utils/raw-body/ci/master?label=ci" alt="Build status" /></a>
<a href="https://coveralls.io/r/stream-utils/raw-body?branch=master"><img src="https://img.shields.io/coveralls/stream-utils/raw-body/master.svg" alt="Test coverage" /></a></p>

<p>Gets the entire buffer of a stream either as a <code class="language-plaintext highlighter-rouge">Buffer</code> or a string.
Validates the streamâ€™s length against an expected length and maximum limit.
Ideal for parsing request bodies.</p>

<h2 id="install">Install</h2>

<p>This is a <a href="https://nodejs.org/en/">Node.js</a> module available through the
<a href="https://www.npmjs.com/">npm registry</a>. Installation is done using the
<a href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally"><code class="language-plaintext highlighter-rouge">npm install</code> command</a>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>raw-body
</code></pre></div></div>

<h3 id="typescript">TypeScript</h3>

<p>This module includes a <a href="https://www.typescriptlang.org/">TypeScript</a>
declaration file to enable auto complete in compatible editors and type
information for TypeScript projects. This module depends on the Node.js
types, so install <code class="language-plaintext highlighter-rouge">@types/node</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> @types/node
</code></pre></div></div>

<h2 id="api">API</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">getRawBody</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">raw-body</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="getrawbodystream-options-callback">getRawBody(stream, [options], [callback])</h3>

<p><strong>Returns a promise if no callback specified and global <code class="language-plaintext highlighter-rouge">Promise</code> exists.</strong></p>

<p>Options:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">length</code> - The length of the stream.
If the contents of the stream do not add up to this length,
an <code class="language-plaintext highlighter-rouge">400</code> error code is returned.</li>
  <li><code class="language-plaintext highlighter-rouge">limit</code> - The byte limit of the body.
This is the number of bytes or any string format supported by
<a href="https://www.npmjs.com/package/bytes">bytes</a>,
for example <code class="language-plaintext highlighter-rouge">1000</code>, <code class="language-plaintext highlighter-rouge">'500kb'</code> or <code class="language-plaintext highlighter-rouge">'3mb'</code>.
If the body ends up being larger than this limit,
a <code class="language-plaintext highlighter-rouge">413</code> error code is returned.</li>
  <li><code class="language-plaintext highlighter-rouge">encoding</code> - The encoding to use to decode the body into a string.
By default, a <code class="language-plaintext highlighter-rouge">Buffer</code> instance will be returned when no encoding is specified.
Most likely, you want <code class="language-plaintext highlighter-rouge">utf-8</code>, so setting <code class="language-plaintext highlighter-rouge">encoding</code> to <code class="language-plaintext highlighter-rouge">true</code> will decode as <code class="language-plaintext highlighter-rouge">utf-8</code>.
You can use any type of encoding supported by <a href="https://www.npmjs.org/package/iconv-lite#readme">iconv-lite</a>.</li>
</ul>

<p>You can also pass a string in place of options to just specify the encoding.</p>

<p>If an error occurs, the stream will be paused, everything unpiped,
and you are responsible for correctly disposing the stream.
For HTTP requests, you may need to finish consuming the stream if
you want to keep the socket open for future requests. For streams
that use file descriptors, you should <code class="language-plaintext highlighter-rouge">stream.destroy()</code> or
<code class="language-plaintext highlighter-rouge">stream.close()</code> to prevent leaks.</p>

<h2 id="errors">Errors</h2>

<p>This module creates errors depending on the error condition during reading.
The error may be an error from the underlying Node.js implementation, but is
otherwise an error created by this module, which has the following attributes:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">limit</code> - the limit in bytes</li>
  <li><code class="language-plaintext highlighter-rouge">length</code> and <code class="language-plaintext highlighter-rouge">expected</code> - the expected length of the stream</li>
  <li><code class="language-plaintext highlighter-rouge">received</code> - the received bytes</li>
  <li><code class="language-plaintext highlighter-rouge">encoding</code> - the invalid encoding</li>
  <li><code class="language-plaintext highlighter-rouge">status</code> and <code class="language-plaintext highlighter-rouge">statusCode</code> - the corresponding status code for the error</li>
  <li><code class="language-plaintext highlighter-rouge">type</code> - the error type</li>
</ul>

<h3 id="types">Types</h3>

<p>The errors from this module have a <code class="language-plaintext highlighter-rouge">type</code> property which allows for the programmatic
determination of the type of error returned.</p>

<h4 id="encodingunsupported">encoding.unsupported</h4>

<p>This error will occur when the <code class="language-plaintext highlighter-rouge">encoding</code> option is specified, but the value does
not map to an encoding supported by the <a href="https://www.npmjs.org/package/iconv-lite#readme">iconv-lite</a>
module.</p>

<h4 id="entitytoolarge">entity.too.large</h4>

<p>This error will occur when the <code class="language-plaintext highlighter-rouge">limit</code> option is specified, but the stream has
an entity that is larger.</p>

<h4 id="requestaborted">request.aborted</h4>

<p>This error will occur when the request stream is aborted by the client before
reading the body has finished.</p>

<h4 id="requestsizeinvalid">request.size.invalid</h4>

<p>This error will occur when the <code class="language-plaintext highlighter-rouge">length</code> option is specified, but the stream has
emitted more bytes.</p>

<h4 id="streamencodingset">stream.encoding.set</h4>

<p>This error will occur when the given stream has an encoding set on it, making it
a decoded stream. The stream should not have an encoding set and is expected to
emit <code class="language-plaintext highlighter-rouge">Buffer</code> objects.</p>

<h4 id="streamnotreadable">stream.not.readable</h4>

<p>This error will occur when the given stream is not readable.</p>

<h2 id="examples">Examples</h2>

<h3 id="simple-express-example">Simple Express example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">contentType</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">getRawBody</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">raw-body</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">getRawBody</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">length</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="dl">'</span><span class="s1">content-length</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">limit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1mb</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">encoding</span><span class="p">:</span> <span class="nx">contentType</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">).</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">charset</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">next</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="nx">req</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">string</span>
    <span class="nx">next</span><span class="p">()</span>
  <span class="p">})</span>
<span class="p">})</span>

<span class="c1">// now access req.text</span>
</code></pre></div></div>

<h3 id="simple-koa-example">Simple Koa example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">contentType</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">getRawBody</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">raw-body</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">koa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">koa</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">koa</span><span class="p">()</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="o">*</span> <span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">getRawBody</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">length</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="dl">'</span><span class="s1">content-length</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">limit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1mb</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">encoding</span><span class="p">:</span> <span class="nx">contentType</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">).</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">charset</span>
  <span class="p">})</span>
  <span class="k">yield</span> <span class="nx">next</span>
<span class="p">})</span>

<span class="c1">// now access this.text</span>
</code></pre></div></div>

<h3 id="using-as-a-promise">Using as a promise</h3>

<p>To use this library as a promise, simply omit the <code class="language-plaintext highlighter-rouge">callback</code> and a promise is
returned, provided that a global <code class="language-plaintext highlighter-rouge">Promise</code> is defined.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">getRawBody</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">raw-body</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">getRawBody</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">buf</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">buf</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> bytes submitted</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">500</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">})</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="using-with-typescript">Using with TypeScript</h3>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">getRawBody</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">raw-body</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">http</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">getRawBody</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">buf</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">buf</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> bytes submitted</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="license">License</h2>

<p><a href="/Multiplayer/node_backend_Trystan/node_modules/raw-body/LICENSE">MIT</a></p>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/Multiplayer/"></data>
  
    <div class="wrapper">
  
      <div class="footer-col-wrapper">
  
        <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://github.com/nighthawkcoders/teacher_portfolio" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/Multiplayer/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://x.com/NighthawkCoding/" target="_blank" title="x">
    <svg class="svg-icon grey">
      <use xlink:href="/Multiplayer/assets/minima-social-icons.svg#x"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.youtube.com/@nighthawkcodingsociety2868" target="_blank" title="youtube">
    <svg class="svg-icon grey">
      <use xlink:href="/Multiplayer/assets/minima-social-icons.svg#youtube"></use>
    </svg>
  </a>
</li>
</ul>
</div>

      </div>
    </div>
  
  </footer></body>

</html>
